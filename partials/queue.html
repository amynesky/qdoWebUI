
  
  <script src="js/queueTaskDetailsDataTable.js"></script>
  <link href="./css/datatables.css" rel="stylesheet">

<button class="glyphicon text" style="float:right; margin-left:5px;" ng-click="logOut()" >Log out</button>
<button class="glyphicon text" style="float:right" ng-click="goToUserhomePage()" >Home</button>
<h1 style="margin-bottom:3px;">{{username}}'s {{ queue.name }} queue</h1>
<p class="lead" style="margin-bottom:3px;">{{ queue.name }} is 
  <span ng-if= "isPaused(queue)">
    <span class="waitingPaused">
      {{ queue.state }}
    </span>
  </span> 
  <span ng-if= "isActive(queue)">
    <span class="runningActive">
      {{ queue.state }}
    </span>
  </span> 
  and has {{queue.ntasks.Waiting  + queue.ntasks.Running + queue.ntasks.Pending}} tasks left to do.
</p>
<span ng-if= "failed(queue)">
    <span class="glyphicon icon-red" style="margin-bottom:10px;"> {{queue.ntasks.Failed}} failed tasks.</span>
</span>
<ul class="list-group">
    <li class="list-group-item">
      <span ng-if="succeeded(queue)" >
        <span class="glyphicon glyphicon-ok successful"></span>
      </span>
      <span ng-if= "failed(queue)" >
        <span class="glyphicon glyphicon-warning-sign failed"></span>
      </span>
      <span ng-if= "inProgress(queue) && isPaused(queue)" >
        <span class="glyphicon glyphicon-road waitingPaused"></span>
      </span>
      <span ng-if= "inProgress(queue) && isActive(queue)" >
        <span class="glyphicon glyphicon-road runningActive"></span>
      </span>

      {{ queue.name }}

      <div class="progress pull-right" style="width: 80%">
        <div class="progress-bar progress-bar-success" style="width: {{ percent(queue, 'Succeeded') }}%">
          <span>{{ queue["ntasks"]["Succeeded"] }}</span>
        </div>
        <div class="progress-bar" style="width: {{ percent(queue, 'Running') }}%"> <!--dark blue-->
          <span>{{ queue["ntasks"]["Running"] }}</span>
        </div>
        <div class="progress-bar progress-bar-warning" style="width: {{ percent(queue, 'Waiting') }}%">
          <span>{{ queue["ntasks"]["Waiting"] }}</span>
        </div>
        <div class="progress-bar progress-bar-danger" style="width: {{ percent(queue, 'Failed') }}%">
          <span>{{ queue["ntasks"]["Failed"] }}</span>
        </div>
        <div class="progress-bar progress-bar-info" style="width: {{ percent(queue, 'Pending') }}%"> <!--light blue-->
          <span>{{ queue["ntasks"]["Pending"] }}</span>
        </div>
      </div> 
      
    </li>
</ul>
<div style = "display:block;" >
    <button class="glyphicon text" type="button" ng-click="rerun()"> <span class="glyphicon-repeat runningActive"></span> Rerun all tasks</button>
  <span ng-if= "isActive(queue)" >
      <button class="glyphicon text" type="button" ng-click="pause()"> <span class="glyphicon-pause waitingPaused"></span> Pause queue</button>
  </span>
  <span ng-if= "isPaused(queue)" >
      <button class="glyphicon text" type="button" ng-click="resume()"><span class="glyphicon-play runningActive"></span> Resume queue</button>
  </span>
  <span ng-if= "failed(queue)" >
      <button class="glyphicon text" type="button" ng-click="retry()"> <span class="glyphicon-refresh runningActive"></span> Retry failed tasks</button>
  </span>
  <span style = "float: right;">
    Key: 
    <span class="successful">Succeeded</span>
    <span class="runningActive">Running</span>
    <span class="waitingPaused">Waiting</span>
    <span class="failed">Failed</span>
    <span class="pending">Pending</span>
  </span>
  
</div>



<div style = "display:block; margin-top:10px;">
  <p>Enter a task below and hit "Add Task" to add a task to the {{queue.name}} queue.</p>
   <input type="text" ng-model="newTask">
    <button class="glyphicon text" ng-click="addTask()" >Add Task</button>
</div>




<div>
  <button style="margin-top:10px;" class="glyphicon text" type="button" ng-click="showHideTaskDetailsTable()"> Task Details:</button>
  <div ng-if="showTaskDetailsTable" class= "container">

    <table project-table id="queueTaskDetailsTable" aa-data="queueTaskDetails" class="table table-striped table-bordered" cellpadding="0" cellspacing="0" border="0" >
        <thead>
            <tr>
              <th>ID</th>
              <th>State</th>
              <th>Task</th>
              <th>Error Code</th>
            </tr>
        </thead>
        <tbody>
          
        </tbody>
    </table>         
  </div>
</div>











